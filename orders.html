<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Khial Shop â€” My Orders</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" type="image/x-icon" href="images/Screenshot 2025-11-29 195834.png">
</head>
<body>

  <header class="navbar">
    <div class="container nav-content">

      <div class="nav-left">
        <button class="menu-btn" id="menuBtn">
          <span></span><span></span><span></span>
        </button>

        <a href="index.html" class="logo">
        <img src="images/Final logo-2.png" alt="Black & Gray Shop Logo" class="logo-icon">
      </a>
      </div>

      <nav class="nav-links" id="navLinks">
        <a href="index.html">Home</a>
        <a href="accessories.html">Accessories</a>
        <a href="clothes.html">Clothes</a>
        <a href="car-gadgets.html">Car Gadgets</a>
        <a href="orders.html" class="active">My Orders</a>
      </nav>

      <div class="nav-right">
        <div class="user-menu" id="userMenu">
          <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
        <a href="cart.html" class="cart-btn" id="cartBtn">ðŸ›’ <span class="cart-count">0</span></a>
      </div>

    </div>
  </header>

  <!-- MOBILE MENU -->
  <div class="mobile-menu" id="mobileMenu">
    <a href="index.html">Home</a>
    <a href="accessories.html">Accessories</a>
    <a href="clothes.html">Clothes</a>
    <a href="car-gadgets.html">Car Gadgets</a>
    <a href="orders.html">My Orders</a>

    <div class="mobile-user-menu" id="mobileUserMenu">
      <span class="mobile-user-greeting" id="mobileUserGreeting">Hi, User</span>
      <button class="mobile-logout-btn" onclick="logout()">Logout</button>
    </div>
  </div>

  <section class="orders-section container">
    <div class="section-header reveal">
      <h1>My Orders</h1>
      <p>Track your orders and view order history</p>
    </div>

    <div class="orders-container" id="ordersContainer">
      <!-- Orders will be loaded here dynamically -->
      <div class="loading-orders">
        <p>Loading your orders...</p>
      </div>
    </div>

    <div class="no-orders" id="noOrders" style="display: none;">
      <div class="empty-state">
        <h3>No Orders Yet</h3>
        <p>You haven't placed any orders yet. Start shopping to see your orders here!</p>
        <a href="index.html" class="btn-primary">Start Shopping</a>
      </div>
    </div>
  </section>

  <footer class="footer">
    <p>Â© 2025 Khial â€” All rights reserved.</p>
  </footer>

  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script src="firebase.js"></script>
  <script src="auth.js"></script>
  <script src="app.js"></script>
  
<script>
// Check if user is authenticated when page loads
document.addEventListener('DOMContentLoaded', function() {
  // Wait for Firebase to initialize
  setTimeout(function() {
    if (window.auth) {
      auth.onAuthStateChanged(function(user) {
        if (!user) {
          // If not logged in, redirect to login page
          window.location.href = 'login.html';
        }
      });
      
      // Also check immediately in case auth state doesn't change
      if (!auth.currentUser) {
        window.location.href = 'login.html';
      }
    } else {
      // If Firebase auth is not available, redirect to login
      window.location.href = 'login.html';
    }
  }, 1000);
});

// Add this to every page EXCEPT index.html
document.addEventListener('DOMContentLoaded', function() {
  // Set navigation flag when loading other pages
  if (!window.location.pathname.endsWith('index.html') && 
      !window.location.pathname.endsWith('/') && 
      window.location.pathname !== '') {
    sessionStorage.setItem('isNavigation', 'true');
  }
});
</script>
</body>
</html>